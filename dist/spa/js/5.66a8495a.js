(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{1:function(e,t){},"713b":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-layout",{staticClass:"bg-secondary",attrs:{view:"lHh Lpr lFf"}},[o("q-header",{attrs:{elevated:""}},[o("q-bar",[o("q-btn",{attrs:{to:"/",size:"xs",icon:"home",outline:"",rounded:"",color:"secondary",label:"Whot!"}}),o("q-space"),o("q-btn",{staticClass:"q-mr-sm",attrs:{to:"/",size:"sm",icon:"gavel",outline:"",rounded:"",color:"secondary",label:"Rules!"},on:{click:function(t){e.showRulesDialog=!0}}}),o("q-btn",{staticClass:"q-ml-md",attrs:{color:e.isLoggedIn?"secondary":"grey",round:"",icon:"person",size:"sm",unelevated:""}},[e.isLoggedIn?e._e():o("q-menu",{attrs:{fit:""}},[o("q-list",{staticStyle:{"min-width":"155px"}},[o("q-item",{attrs:{clickable:""},on:{click:function(t){e.loginDialog=!0}}},[o("q-item-section",[e._v("Sign in")])],1),o("q-item",{attrs:{clickable:""},on:{click:function(t){e.registerDialog=!0}}},[o("q-item-section",[e._v("Register")])],1)],1)],1),e.isLoggedIn?o("q-menu",{attrs:{fit:""}},[o("q-list",{staticStyle:{"min-width":"155px"}},[o("q-item",{attrs:{clickable:""},on:{click:function(t){e.profileDialog=!0}}},[o("q-item-section",[e._v("Profile")])],1),o("q-item",{attrs:{clickable:""},on:{click:e.logUserOut}},[o("q-item-section",[e._v("Log out")])],1)],1)],1):e._e()],1)],1)],1),o("q-page-container",[o("router-view")],1),o("q-dialog",{attrs:{persistent:"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.showRulesDialog,callback:function(t){e.showRulesDialog=t},expression:"showRulesDialog"}},[o("rulesdialog")],1),o("q-dialog",{model:{value:e.profileDialog,callback:function(t){e.profileDialog=t},expression:"profileDialog"}},[o("profiledialog",{on:{closeDialog:e.closeProfile}})],1),o("q-dialog",{model:{value:e.loginDialog,callback:function(t){e.loginDialog=t},expression:"loginDialog"}},[o("logindialog",{on:{closeDialog:e.closeLogin}})],1),o("q-dialog",{model:{value:e.registerDialog,callback:function(t){e.registerDialog=t},expression:"registerDialog"}},[o("registerdialog",{on:{closeDialog:e.closeRegister}})],1)],1)},s=[],a=(o("e6cf"),o("ded3")),n=o.n(a),l=o("8055"),r=o.n(l),h=o("2f62"),c={name:"MainLayout",data:()=>({profileDialog:!1,showRulesDialog:!1,loginDialog:!1,registerDialog:!1,socket:{}}),computed:n()(n()({},Object(h["c"])("users",["isLoggedIn","whotUser"])),Object(h["c"])("game",["whotGame","currentPlayer","selectedCards"])),components:{profiledialog:()=>Promise.all([o.e(0),o.e(22)]).then(o.bind(null,"f951")),rulesdialog:()=>Promise.all([o.e(0),o.e(28)]).then(o.bind(null,"71f3")),logindialog:()=>Promise.all([o.e(0),o.e(17)]).then(o.bind(null,"55ce")),registerdialog:()=>Promise.all([o.e(0),o.e(18)]).then(o.bind(null,"fbff"))},methods:n()(n()(n()({},Object(h["b"])("users",["checkUserLogin","logout"])),Object(h["b"])("game",["updateGame","updateGamesList"])),{},{closeProfile(){this.profileDialog=!1},closeRegister(){this.registerDialog=!1},closeLogin(){this.registerDialog=!1},logUserOut(){this.logout().then(()=>{this.$router.push("/")})},checkTurn(){return this.whotGame.players[this.whotGame.currentPlayer].name===this.whotUser.username},showNotif(e){this.$q.notify({message:e,color:"dark",timeout:1500})}}),mounted(){this.socket.on("disconnect",()=>{console.log("Client disconnecting")}),this.$root.$on("fetchOpenGames",()=>{this.socket.emit("fetchOpenGames")}),this.socket.on("openGames",e=>{this.updateGamesList(e)}),this.$root.$on("hostNewGame",e=>{const t={id:this.whotUser.userID,name:this.whotUser.username,played:this.whotUser.played,won:this.whotUser.won,lost:this.whotUser.lost},o={player:t,game:e};this.socket.emit("hostNewGame",o)}),this.socket.on("gameHosted",e=>{this.updateGame(e).then(()=>{this.$root.$emit("showGameWaitingDialog")})}),this.$root.$on("joinGame",e=>{const t={id:this.whotUser.userID,name:this.whotUser.username,played:this.whotUser.played,won:this.whotUser.won,lost:this.whotUser.lost},o={player:t,gameID:e};this.socket.emit("joinGame",o)}),this.socket.on("playerJoined",e=>{this.updateGame(e).then(()=>{this.$root.$emit("showGameWaitingDialog")})}),this.socket.on("newPlayerJoined",e=>{this.updateGame(e).then(()=>{this.$root.$emit("refreshWaitingGame")})}),this.socket.on("gameStarting",e=>{this.updateGame(e).then(()=>{this.$root.$emit("startGame")})}),this.$root.$on("leaveGame",()=>{const e={gameID:this.whotGame.game.id,playerID:this.whotUser.userID};this.socket.emit("leaveGame",e)}),this.socket.on("gameClosed",e=>{this.$root.$emit("closeGameWaitingDialog"),this.$root.$emit("refreshWaitingGame"),this.updateGamesList(e)}),this.socket.on("playerLeft",e=>{e?(1===e.players.length&&this.$root.$emit("closeGameDialog"),this.updateGame(e),this.$root.$emit("refreshWaitingGame")):this.$root.$emit("closeGameWaitingDialog")}),this.socket.on("gameContinue",e=>{this.updateGame(e).then(()=>{this.$root.$emit("refreshGameBoard"),this.showNotif(e.lastMove)})}),this.$root.$on("joinPrivateGame",e=>{const t={id:this.whotUser.userID,name:this.whotUser.username,played:this.whotUser.played,won:this.whotUser.won,lost:this.whotUser.lost},o={player:t,gameID:e};this.socket.emit("joinGame",o)}),this.$root.$on("pickMarket",()=>{const e=this.checkTurn();e&&this.socket.emit("pickMarket",this.whotGame)}),this.$root.$on("playCards",()=>{if(!this.checkTurn())return;const e={game:this.whotGame,selectedCards:this.selectedCards};this.socket.emit("playCards",e)}),this.$root.$on("refreshGame",()=>{this.$root.$emit("refreshGameBoard")})},created(){this.checkUserLogin().then(()=>{}),this.socket=r()("https://whotserver.herokuapp.com")}},m=c,g=(o("8580"),o("2877")),d=o("4d5a"),u=o("e359"),p=o("d847"),w=o("9c40"),f=o("2c91"),k=o("4e73"),$=o("1c1c"),D=o("66e5"),G=o("4074"),b=o("09e3"),y=o("24e8"),q=o("eebe"),U=o.n(q),v=Object(g["a"])(m,i,s,!1,null,"1acbffa0",null);t["default"]=v.exports;U()(v,"components",{QLayout:d["a"],QHeader:u["a"],QBar:p["a"],QBtn:w["a"],QSpace:f["a"],QMenu:k["a"],QList:$["a"],QItem:D["a"],QItemSection:G["a"],QPageContainer:b["a"],QDialog:y["a"]})},8580:function(e,t,o){"use strict";var i=o("f213"),s=o.n(i);s.a},f213:function(e,t,o){}}]);