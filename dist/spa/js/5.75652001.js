(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{1:function(e,t){},"3c42":function(e,t,o){},4956:function(e,t,o){e.exports=o.p+"media/notif1.99e7754e.mp3"},"713b":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-layout",{staticClass:"bg-secondary",attrs:{view:"lHh Lpr lFf"}},[i("q-header",{attrs:{elevated:""}},[i("q-bar",[i("q-btn",{attrs:{to:"/",size:"xs",icon:"home",outline:"",rounded:"",color:"secondary",label:"Whot!"}}),i("q-space"),i("audio",{attrs:{id:"audio",src:o("4956")}}),i("q-btn",{staticClass:"q-mr-sm",attrs:{to:"/",size:"sm",icon:"gavel",outline:"",rounded:"",color:"secondary",label:"Rules!"},on:{click:function(t){e.showRulesDialog=!0}}}),i("q-btn",{staticClass:"q-ml-md",attrs:{color:e.isLoggedIn?"secondary":"grey",round:"",icon:"person",size:"sm",unelevated:""}},[e.isLoggedIn?e._e():i("q-menu",{attrs:{fit:""}},[i("q-list",{staticStyle:{"min-width":"155px"}},[i("q-item",{attrs:{clickable:""},on:{click:function(t){e.loginDialog=!0}}},[i("q-item-section",[e._v("Sign in")])],1),i("q-item",{attrs:{clickable:""},on:{click:function(t){e.registerDialog=!0}}},[i("q-item-section",[e._v("Register")])],1)],1)],1),e.isLoggedIn?i("q-menu",{attrs:{fit:""}},[i("q-list",{staticStyle:{"min-width":"155px"}},[i("q-item",{attrs:{clickable:""},on:{click:function(t){e.profileDialog=!0}}},[i("q-item-section",[e._v("Profile")])],1),i("q-item",{attrs:{clickable:""},on:{click:e.logUserOut}},[i("q-item-section",[e._v("Log out")])],1)],1)],1):e._e()],1)],1)],1),i("q-page-container",[i("router-view")],1),i("q-dialog",{attrs:{persistent:"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.showRulesDialog,callback:function(t){e.showRulesDialog=t},expression:"showRulesDialog"}},[i("rulesdialog")],1),i("q-dialog",{model:{value:e.profileDialog,callback:function(t){e.profileDialog=t},expression:"profileDialog"}},[i("profiledialog",{on:{closeDialog:e.closeProfile}})],1),i("q-dialog",{model:{value:e.loginDialog,callback:function(t){e.loginDialog=t},expression:"loginDialog"}},[i("logindialog",{on:{closeDialog:e.closeLogin}})],1),i("q-dialog",{model:{value:e.registerDialog,callback:function(t){e.registerDialog=t},expression:"registerDialog"}},[i("registerdialog",{on:{closeDialog:e.closeRegister}})],1),i("q-dialog",{model:{value:e.whotDialog,callback:function(t){e.whotDialog=t},expression:"whotDialog"}},[i("whotdialog",{on:{closeDialog:function(t){e.whotDialog=!1}}})],1)],1)},s=[],a=(o("e6cf"),o("ded3")),n=o.n(a),l=o("8055"),r=o.n(l),h=o("2f62"),c={name:"MainLayout",data:()=>({whotDialog:!1,profileDialog:!1,showRulesDialog:!1,loginDialog:!1,registerDialog:!1,socket:{}}),computed:n()(n()({},Object(h["c"])("users",["isLoggedIn","whotUser"])),Object(h["c"])("game",["whotGame","currentPlayer","selectedCards","whotSettings"])),components:{profiledialog:()=>Promise.all([o.e(0),o.e(24)]).then(o.bind(null,"f951")),rulesdialog:()=>Promise.all([o.e(0),o.e(30)]).then(o.bind(null,"71f3")),logindialog:()=>Promise.all([o.e(0),o.e(18)]).then(o.bind(null,"55ce")),whotdialog:()=>o.e(23).then(o.bind(null,"7139")),registerdialog:()=>Promise.all([o.e(0),o.e(19)]).then(o.bind(null,"fbff"))},methods:n()(n()(n()({},Object(h["b"])("users",["checkUserLogin","logout"])),Object(h["b"])("game",["updateGame","updateGamesList","setWhotShape"])),{},{closeProfile(){this.profileDialog=!1},closeRegister(){this.registerDialog=!1},closeLogin(){this.registerDialog=!1},logUserOut(){this.logout().then(()=>{this.$router.push("/")})},checkTurn(){return this.whotGame.players[this.whotGame.currentPlayer].name===this.whotUser.username},showNotif(e){this.$q.notify({message:e,color:"dark",timeout:1500})},showMsgNotif(e){this.$q.notify({player:e.player,caption:e.message,color:"primary"})}}),mounted(){this.socket.on("disconnect",()=>{console.log("Client disconnecting")}),this.$root.$on("fetchOpenGames",()=>{this.socket.emit("fetchOpenGames")}),this.socket.on("openGames",e=>{this.updateGamesList(e)}),this.$root.$on("hostNewGame",e=>{const t={id:this.whotUser.userID,name:this.whotUser.username,played:this.whotUser.played,won:this.whotUser.won,lost:this.whotUser.lost},o={player:t,game:e};this.socket.emit("hostNewGame",o)}),this.socket.on("gameHosted",e=>{this.updateGame(e).then(()=>{this.$root.$emit("showGameWaitingDialog")})}),this.$root.$on("joinGame",e=>{const t={id:this.whotUser.userID,name:this.whotUser.username,played:this.whotUser.played,won:this.whotUser.won,lost:this.whotUser.lost},o={player:t,gameID:e};this.socket.emit("joinGame",o)}),this.socket.on("playerJoined",e=>{this.updateGame(e).then(()=>{this.$root.$emit("showGameWaitingDialog")})}),this.socket.on("newPlayerJoined",e=>{this.updateGame(e).then(()=>{this.$root.$emit("refreshWaitingGame")})}),this.socket.on("gameStarting",e=>{this.updateGame(e).then(()=>{this.$root.$emit("startGame")})}),this.$root.$on("leaveGame",()=>{const e={gameID:this.whotGame.game.id,playerID:this.whotUser.userID};this.socket.emit("leaveGame",e)}),this.socket.on("gameClosed",e=>{this.$root.$emit("closeGameWaitingDialog"),this.$root.$emit("refreshWaitingGame"),this.updateGamesList(e)}),this.socket.on("playerLeft",e=>{e?(1===e.players.length&&this.$root.$emit("closeGameDialog"),this.updateGame(e),this.$root.$emit("refreshWaitingGame")):this.$root.$emit("closeGameWaitingDialog")}),this.socket.on("gameContinue",e=>{document.getElementById("audio");this.updateGame(e).then(()=>{this.$root.$emit("refreshGameBoard")})}),this.socket.on("selectShape",e=>{this.updateGame(e).then(()=>{this.$root.$emit("refreshGameBoard"),this.whotDialog=!0})}),this.$root.$on("joinPrivateGame",e=>{const t={id:this.whotUser.userID,name:this.whotUser.username,played:this.whotUser.played,won:this.whotUser.won,lost:this.whotUser.lost},o={player:t,gameID:e};this.socket.emit("joinGame",o)}),this.$root.$on("pickMarket",()=>{const e=this.checkTurn();e&&this.socket.emit("pickMarket",this.whotGame)}),this.$root.$on("playCards",()=>{if(!this.checkTurn())return;const e={game:this.whotGame,selectedCards:this.selectedCards};this.socket.emit("playCards",e)}),this.$root.$on("refreshGame",()=>{this.$root.$emit("refreshGameBoard")}),this.$root.$on("shapeSelected",e=>{this.setWhotShape(e).then(()=>{this.socket.emit("shapeSelected",this.whotGame)})}),this.$root.$on("sendMessage",e=>{const t={player:this.whotUser.username,message:e};this.socket.emit("sendMessage",t)}),this.socket.on("receiveMsg",e=>{const t=`${e.player}: ${e.message}`;this.showNotif(t)})},created(){this.checkUserLogin().then(()=>{}),this.socket=r()("https://whotserver.herokuapp.com")}},m=c,g=(o("7382"),o("2877")),d=o("4d5a"),u=o("e359"),p=o("d847"),w=o("9c40"),f=o("2c91"),$=o("4e73"),k=o("1c1c"),D=o("66e5"),G=o("4074"),y=o("09e3"),b=o("24e8"),q=o("eebe"),U=o.n(q),v=Object(g["a"])(m,i,s,!1,null,"d201b7ac",null);t["default"]=v.exports;U()(v,"components",{QLayout:d["a"],QHeader:u["a"],QBar:p["a"],QBtn:w["a"],QSpace:f["a"],QMenu:$["a"],QList:k["a"],QItem:D["a"],QItemSection:G["a"],QPageContainer:y["a"],QDialog:b["a"]})},7382:function(e,t,o){"use strict";var i=o("3c42"),s=o.n(i);s.a}}]);