(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{1:function(e,t){},"17e1":function(e,t,o){},"713b":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-layout",{staticClass:"bg-secondary",attrs:{view:"lHh Lpr lFf"}},[o("q-header",{attrs:{elevated:""}},[o("q-toolbar",[o("q-toolbar-title",[o("q-btn",{attrs:{to:"/",size:"sm",icon:"home",outline:"",rounded:"",color:"secondary",label:"Whot!"}})],1),o("q-btn",{attrs:{to:"/",size:"sm",icon:"gavel",outline:"",rounded:"",color:"secondary",label:"Rules!"},on:{click:function(t){e.showRulesDialog=!0}}}),o("q-btn",{staticClass:"q-ml-md",attrs:{color:e.isLoggedIn?"secondary":"grey",round:"",icon:"person",size:"sm",unelevated:""}},[e.isLoggedIn?e._e():o("q-menu",{attrs:{fit:""}},[o("q-list",{staticStyle:{"min-width":"155px"}},[o("q-item",{attrs:{clickable:""},on:{click:function(t){e.loginDialog=!0}}},[o("q-item-section",[e._v("Sign in")])],1),o("q-item",{attrs:{clickable:""},on:{click:function(t){e.registerDialog=!0}}},[o("q-item-section",[e._v("Register")])],1)],1)],1),e.isLoggedIn?o("q-menu",{attrs:{fit:""}},[o("q-list",{staticStyle:{"min-width":"155px"}},[o("q-item",{attrs:{clickable:""},on:{click:function(t){e.profileDialog=!0}}},[o("q-item-section",[e._v("Profile")])],1),o("q-item",{attrs:{clickable:""},on:{click:e.logUserOut}},[o("q-item-section",[e._v("Log out")])],1)],1)],1):e._e()],1)],1)],1),o("q-page-container",[o("router-view")],1),o("q-dialog",{attrs:{persistent:"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.showRulesDialog,callback:function(t){e.showRulesDialog=t},expression:"showRulesDialog"}},[o("rulesdialog")],1),o("q-dialog",{model:{value:e.profileDialog,callback:function(t){e.profileDialog=t},expression:"profileDialog"}},[o("profiledialog",{on:{closeDialog:e.closeProfile}})],1),o("q-dialog",{model:{value:e.loginDialog,callback:function(t){e.loginDialog=t},expression:"loginDialog"}},[o("logindialog",{on:{closeDialog:e.closeLogin}})],1),o("q-dialog",{model:{value:e.registerDialog,callback:function(t){e.registerDialog=t},expression:"registerDialog"}},[o("registerdialog",{on:{closeDialog:e.closeRegister}})],1)],1)},s=[],a=(o("e6cf"),o("ded3")),l=o.n(a),n=o("8055"),r=o.n(n),c=o("2f62"),h={name:"MainLayout",data:()=>({profileDialog:!1,showRulesDialog:!1,loginDialog:!1,registerDialog:!1,socket:{}}),computed:l()(l()({},Object(c["c"])("users",["isLoggedIn","whotUser"])),Object(c["c"])("game",["whotGame"])),components:{profiledialog:()=>Promise.all([o.e(0),o.e(19)]).then(o.bind(null,"f951")),rulesdialog:()=>Promise.all([o.e(0),o.e(25)]).then(o.bind(null,"71f3")),logindialog:()=>Promise.all([o.e(0),o.e(14)]).then(o.bind(null,"55ce")),registerdialog:()=>Promise.all([o.e(0),o.e(15)]).then(o.bind(null,"fbff"))},methods:l()(l()(l()({},Object(c["b"])("users",["checkUserLogin","logout"])),Object(c["b"])("game",["updateGame","updateGamesList"])),{},{closeProfile(){this.profileDialog=!1},closeRegister(){this.registerDialog=!1},closeLogin(){this.registerDialog=!1},logUserOut(){this.logout().then(()=>{this.$router.push("/")})}}),mounted(){this.socket.on("disconnect",()=>{console.log("Client disconnecting")}),this.$root.$on("fetchOpenGames",()=>{this.socket.emit("fetchOpenGames")}),this.socket.on("openGames",e=>{this.updateGamesList(e)}),this.$root.$on("hostNewGame",e=>{const t={id:this.whotUser.userID,name:this.whotUser.username,played:this.whotUser.played,won:this.whotUser.won,lost:this.whotUser.lost},o={player:t,game:e};this.socket.emit("hostNewGame",o)}),this.socket.on("gameHosted",e=>{this.updateGame(e).then(()=>{this.$root.$emit("showGameWaitingDialog")})}),this.$root.$on("joinGame",e=>{const t={id:this.whotUser.userID,name:this.whotUser.username,played:this.whotUser.played,won:this.whotUser.won,lost:this.whotUser.lost},o={player:t,gameID:e};this.socket.emit("joinGame",o)}),this.socket.on("playerJoined",e=>{this.updateGame(e).then(()=>{this.$root.$emit("showGameWaitingDialog")})}),this.socket.on("newPlayerJoined",e=>{this.updateGame(e).then(()=>{this.$root.$emit("refreshWaitingGame")})}),this.socket.on("gameStarting",e=>{this.updateGame(e).then(()=>{this.$root.$emit("startGame")})}),this.$root.$on("leaveGame",()=>{const e={gameID:this.whotGame.game.id,playerID:this.whotUser.userID};this.socket.emit("leaveGame",e)}),this.socket.on("gameClosed",e=>{this.$root.$emit("closeGameWaitingDialog"),this.$root.$emit("refreshWaitingGame"),this.updateGamesList(e)}),this.socket.on("playerLeft",e=>{e?(this.updateGame(e),this.$root.$emit("refreshWaitingGame")):this.$root.$emit("closeGameWaitingDialog")}),this.$root.$on("joinPrivateGame",e=>{const t={id:this.whotUser.userID,name:this.whotUser.username,played:this.whotUser.played,won:this.whotUser.won,lost:this.whotUser.lost},o={player:t,gameID:e};this.socket.emit("joinGame",o)})},created(){this.checkUserLogin().then(()=>{}),this.socket=r()("https://whotserver.herokuapp.com")}},g=h,m=(o("af31"),o("2877")),d=o("4d5a"),u=o("e359"),p=o("65c6"),w=o("6ac5"),f=o("9c40"),D=o("4e73"),b=o("1c1c"),k=o("66e5"),G=o("4074"),$=o("09e3"),q=o("24e8"),y=o("eebe"),U=o.n(y),v=Object(m["a"])(g,i,s,!1,null,"7c730b92",null);t["default"]=v.exports;U()(v,"components",{QLayout:d["a"],QHeader:u["a"],QToolbar:p["a"],QToolbarTitle:w["a"],QBtn:f["a"],QMenu:D["a"],QList:b["a"],QItem:k["a"],QItemSection:G["a"],QPageContainer:$["a"],QDialog:q["a"]})},af31:function(e,t,o){"use strict";var i=o("17e1"),s=o.n(i);s.a}}]);